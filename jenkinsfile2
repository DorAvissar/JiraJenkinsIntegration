#!/usr/bin/env groovy

def updateJiraIssue(issueKey) {
    def jiraIssue = jiraGetIssue(issueKey)
    if (jiraIssue) {
        echo "Updating status of Jira issue ${issueKey} to 'Done'"
        jiraTransitionIssue(issueKey, '11') // Transition ID 11 represents "Done" status
    } else {
        echo "Jira issue ${issueKey} does not exist"
    }
}

pipeline {
    agent any

    stages {
        stage('Update Jira Issue') {
            steps {
                script {
                    updateJiraIssue('MET-2')
                }
            }
        }
    }
}
